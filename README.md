# Billing Form Test

Тестовое приложение для работы с платежными формами. Проект демонстрирует навыки работы с Vue 3, Pinia и TypeScript, реализован по архитектуре Feature-Sliced Design (FSD).

## Описание проекта

Приложение включает в себя:
- **Форму ввода платежных данных** с валидацией полей (номер карты, CVС, срок действия, держатель карты, сумма платежа)
- **Страницу просмотра данных** с загрузкой случайных данных карты из API
- **Переиспользуемый виджет** BillingForm с поддержкой двух режимов работы (edit/view)
- **Автофокус** на первом поле формы при открытии страницы ввода
- **Валидацию в реальном времени** после первой попытки отправки
- **Очистку состояния** при переходе между страницами

## Технологии

- **Vue 3** (Composition API) - фреймворк для построения пользовательского интерфейса
- **Pinia** - state management
- **TypeScript** - типизация
- **Vue Router** - роутинг
- **Tailwind CSS v4** - стилизация
- **Vite** - сборщик и dev-сервер
- **ESLint + Prettier** - линтинг и форматирование кода
- **Jest + Vitest** - тестирование

## Требования к системе

- **Node.js**: версия `^20.19.0` или `>=22.12.0`
- **npm** или **yarn**

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd billing-form-test
```

2. Установите зависимости:
```bash
npm install
```

## Запуск проекта локально

### Режим разработки

Запустить dev-сервер с hot-reload:
```bash
npm run dev
```

Приложение будет доступно по адресу: `http://localhost:5173/`

### Production сборка

Собрать проект для production:
```bash
npm run build
```

Скомпилированные файлы будут находиться в папке `dist/`

### Предпросмотр production сборки

Локально запустить production сборку:
```bash
npm run preview
```

## Доступные команды

| Команда | Описание |
|---------|----------|
| `npm run dev` | Запуск dev-сервера |
| `npm run build` | Production сборка (с type-check) |
| `npm run preview` | Предпросмотр production сборки |
| `npm run type-check` | Проверка типов TypeScript |
| `npm run lint` | Проверка и автоматическое исправление ошибок линтинга |
| `npm run lint:check` | Проверка ошибок линтинга без исправления |
| `npm run format` | Форматирование кода с помощью Prettier |
| `npm run format:check` | Проверка форматирования кода |
| `npm run test:unit` | Запуск unit-тестов |

## Структура проекта (FSD)

Проект организован по методологии Feature-Sliced Design:

```
src/
├── app/                      # Инициализация приложения
│   ├── App.vue              # Корневой компонент
│   ├── main.ts              # Точка входа
│   ├── providers/           # Провайдеры (router, store)
│   └── styles/              # Глобальные стили
├── pages/                   # Страницы приложения
│   ├── home/                # Главная страница (ввод данных)
│   └── chamber-of-secrets/  # Страница просмотра данных
├── widgets/                 # Виджеты (сложные UI-блоки)
│   └── billing-form/        # Виджет платежной формы
│       ├── ui/              # UI компоненты
│       ├── model/           # Бизнес-логика (useBillingForm)
│       └── index.ts         # Public API
├── entities/                # Бизнес-сущности
│   └── card/                # Сущность карты
│       ├── api/             # API запросы
│       ├── model/           # Store, types
│       └── index.ts         # Public API
└── shared/                  # Переиспользуемые ресурсы
    ├── ui/                  # UI компоненты
    ├── lib/                 # Утилиты, валидаторы
    └── api/                 # Базовая настройка API
```

## Страницы приложения

### Главная страница (`/`)
- Форма для ввода платежных данных
- Валидация всех полей
- Автофокус на поле "Сумма платежа"
- Отправка данных на сервер
- Режим работы: **edit**

### Chamber of Secrets (`/chamber-of-secrets`)
- Просмотр случайных данных карты из API
- Загрузка данных при монтировании компонента
- Очистка данных при размонтировании
- Кнопка "Оплатить" заблокирована
- Режим работы: **view**

## Особенности реализации

### Переиспользуемый виджет BillingForm

Виджет поддерживает два режима работы через пропсы:

```vue
<!-- 'edit' | 'view' -->
<BillingForm
  mode="edit"
  :fetch-data="loadData"
  :auto-clear="true"
/>
```

**Параметры:**
- `mode`: режим работы - `'edit'` (редактирование) или `'view'` (просмотр)
- `fetchData`: callback для загрузки данных при монтировании компонента
- `autoClear`: флаг автоматической очистки данных при размонтировании

### Валидация

- Валидация запускается после первой попытки отправки формы
- После этого валидация работает в реальном времени при вводе
- Валидаторы находятся в `src/shared/lib/validators/cardValidators.ts`
- Поддерживаются все основные проверки для платежных форм

### State Management

- Глобальное состояние управляется через Pinia
- Store карты: `src/entities/card/model/store.ts`
- Содержит данные карты, методы для работы с API и обновления состояния
